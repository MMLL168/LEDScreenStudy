import React, { useState, useEffect } from 'react';
import { 
  Cpu, 
  MemoryStick, 
  Zap, 
  Layers, 
  AlertTriangle, 
  CheckCircle2, 
  ArrowRight, 
  Activity,
  Microchip,
  Lightbulb,
  Settings,
  Maximize2,
  Minimize2,
  Server
} from 'lucide-react';

// Tailwind CSS is assumed to be available

const Dashboard = () => {
  const [activeTab, setActiveTab] = useState('architecture');
  const [ledMode, setLedMode] = useState('apex'); // 'everlight' or 'apex'
  const [showBackupLine, setShowBackupLine] = useState(false);

  return (
    <div className="min-h-screen bg-slate-900 text-slate-100 font-sans selection:bg-cyan-500 selection:text-white">
      {/* Header */}
      <header className="bg-slate-800 border-b border-slate-700 sticky top-0 z-50 shadow-lg">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="bg-cyan-500 p-2 rounded-lg">
              <Cpu className="w-6 h-6 text-white" />
            </div>
            <div>
              <h1 className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500">
                LED Matrix Project Analysis
              </h1>
              <p className="text-xs text-slate-400">Engineering Report for Marlon</p>
            </div>
          </div>
          <div className="flex gap-2">
            {['architecture', 'components', 'fpga', 'action'].map((tab) => (
              <button
                key={tab}
                onClick={() => setActiveTab(tab)}
                className={`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${
                  activeTab === tab 
                    ? 'bg-cyan-500/10 text-cyan-400 border border-cyan-500/50 shadow-[0_0_10px_rgba(6,182,212,0.2)]' 
                    : 'text-slate-400 hover:text-slate-100 hover:bg-slate-800'
                }`}
              >
                {tab.charAt(0).toUpperCase() + tab.slice(1)}
              </button>
            ))}
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        {/* Intro Banner */}
        <div className="mb-8 p-6 bg-gradient-to-r from-indigo-900/50 to-slate-800 rounded-xl border border-indigo-500/30 flex items-start gap-4">
          <div className="p-3 bg-indigo-500/20 rounded-full">
            <Activity className="w-6 h-6 text-indigo-400" />
          </div>
          <div>
            <h2 className="text-lg font-semibold text-white mb-1">
              專案狀態: <span className="text-emerald-400">分析完成</span>
            </h2>
            <p className="text-slate-300 text-sm leading-relaxed">
              根據 Datasheets (AC701, AS16sch, Everlight, Apex)，這是一個 **高密度小間距 LED 顯示系統**。
              核心挑戰在於 FPGA 資源分配 (XC7A35T vs 100T) 以及不兼容的 LED 控制協議選擇。
            </p>
          </div>
        </div>

        {/* Tab Content */}
        {activeTab === 'architecture' && <ArchitectureView />}
        {activeTab === 'components' && <LedComparison mode={ledMode} setMode={setLedMode} showBackup={showBackupLine} setShowBackup={setShowBackupLine} />}
        {activeTab === 'fpga' && <FpgaAnalysis />}
        {activeTab === 'action' && <ActionPlan />}

      </main>

      {/* Footer */}
      <footer className="border-t border-slate-800 mt-12 py-6 text-center text-slate-500 text-sm">
        Generated by Gemini for Marlon • Engineering Analysis v1.0
      </footer>
    </div>
  );
};

// --- Sub-Components ---

const ArchitectureView = () => {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in duration-500">
      <div className="lg:col-span-2 bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl relative overflow-hidden">
        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 via-purple-500 to-cyan-500 opacity-50" />
        <h3 className="text-lg font-semibold text-white mb-6 flex items-center gap-2">
          <Server className="w-5 h-5 text-cyan-400" /> 系統訊號流向 (System Signal Flow)
        </h3>
        
        {/* Simplified SVG Diagram */}
        <div className="relative w-full h-80 bg-slate-900/50 rounded-lg border border-slate-700 p-4 flex items-center justify-center">
          <svg viewBox="0 0 800 400" className="w-full h-full">
            <defs>
              <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8" />
              </marker>
              <linearGradient id="flowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stopColor="#06b6d4" stopOpacity="0" />
                <stop offset="50%" stopColor="#06b6d4" stopOpacity="1" />
                <stop offset="100%" stopColor="#06b6d4" stopOpacity="0" />
              </linearGradient>
            </defs>
            
            {/* Connection Lines (Static) */}
            <path d="M100,200 L250,200" stroke="#334155" strokeWidth="2" markerEnd="url(#arrow)" />
            <path d="M350,150 L350,80" stroke="#334155" strokeWidth="2" />
            <path d="M350,250 L350,320" stroke="#334155" strokeWidth="2" />
            <path d="M450,200 L600,200" stroke="#334155" strokeWidth="2" markerEnd="url(#arrow)" />

            {/* Animated Data Packets */}
            <circle r="4" fill="#06b6d4">
              <animateMotion dur="2s" repeatCount="indefinite" path="M100,200 L250,200" />
            </circle>
            <circle r="4" fill="#a855f7">
              <animateMotion dur="3s" repeatCount="indefinite" path="M450,200 L600,200" />
            </circle>
            {/* DDR Interaction */}
            <circle r="4" fill="#ef4444">
              <animateMotion dur="1.5s" repeatCount="indefinite" values="350,150; 350,80; 350,150" keyTimes="0; 0.5; 1" />
            </circle>

            {/* Components */}
            <g transform="translate(20, 170)">
              <rect width="80" height="60" rx="4" fill="#1e293b" stroke="#64748b" strokeWidth="2" />
              <text x="40" y="35" textAnchor="middle" fill="#e2e8f0" fontSize="12">Video Source</text>
            </g>

            <g transform="translate(250, 150)">
              <rect width="200" height="100" rx="8" fill="#0f172a" stroke="#06b6d4" strokeWidth="2" className="drop-shadow-[0_0_15px_rgba(6,182,212,0.3)]" />
              <text x="100" y="45" textAnchor="middle" fill="#ffffff" fontWeight="bold" fontSize="16">Xilinx Artix-7</text>
              <text x="100" y="65" textAnchor="middle" fill="#94a3b8" fontSize="12">XC7A35T / 100T</text>
            </g>

            <g transform="translate(300, 20)">
              <rect width="100" height="60" rx="4" fill="#1e293b" stroke="#ef4444" strokeWidth="2" />
              <text x="50" y="35" textAnchor="middle" fill="#e2e8f0" fontSize="12">DDR3L RAM</text>
            </g>

            <g transform="translate(300, 320)">
              <rect width="100" height="60" rx="4" fill="#1e293b" stroke="#eab308" strokeWidth="2" />
              <text x="50" y="25" textAnchor="middle" fill="#e2e8f0" fontSize="12">SPI Flash</text>
              <text x="50" y="45" textAnchor="middle" fill="#94a3b8" fontSize="10">Bitstream/Cfg</text>
            </g>

            <g transform="translate(600, 140)">
              <rect width="180" height="120" rx="4" fill="#1e293b" stroke="#a855f7" strokeWidth="2" />
              <text x="90" y="30" textAnchor="middle" fill="#e2e8f0" fontSize="14" fontWeight="bold">LED Matrix Panel</text>
              
              {/* Matrix Dots */}
              <g fill="#475569">
                <circle cx="45" cy="60" r="3" /> <circle cx="65" cy="60" r="3" /> <circle cx="85" cy="60" r="3" /> <circle cx="105" cy="60" r="3" /> <circle cx="125" cy="60" r="3" />
                <circle cx="45" cy="80" r="3" /> <circle cx="65" cy="80" r="3" /> <circle cx="85" cy="80" r="3" /> <circle cx="105" cy="80" r="3" /> <circle cx="125" cy="80" r="3" />
              </g>
              <text x="90" y="105" textAnchor="middle" fill="#a855f7" fontSize="10">1010 RGB LEDs</text>
            </g>
          </svg>
        </div>

        <div className="mt-6 grid grid-cols-2 gap-4">
           <div className="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50">
             <h4 className="text-cyan-400 text-sm font-semibold mb-2">關鍵路徑: DDR3</h4>
             <p className="text-xs text-slate-400">
               Artix-7 記憶體控制器需要精確的 "Fly-by" 拓撲 Layout。MT41K256M16 (DDR3L) 運行於 1.35V。此處的阻抗匹配若失敗會導致閃屏。
             </p>
           </div>
           <div className="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50">
             <h4 className="text-yellow-400 text-sm font-semibold mb-2">AnDAPT 電源管理</h4>
             <p className="text-xs text-slate-400">
               AS16sch 使用 AnDAPT PMIC。必須嚴格遵守上電順序：<strong>1.0V (Core) → 1.8V (Aux) → 1.35V/3.3V (IO)</strong>。否則 FPGA 無法啟動。
             </p>
           </div>
        </div>
      </div>

      <div className="space-y-6">
        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl">
          <h3 className="text-lg font-semibold text-white mb-4">MCU 角色 (STM32/ESP32)</h3>
          <div className="space-y-4">
            <div className="flex gap-3">
              <div className="mt-1"><Microchip className="w-5 h-5 text-green-400"/></div>
              <div>
                <h4 className="text-sm font-medium text-slate-200">系統監控 (Housekeeping)</h4>
                <p className="text-xs text-slate-400">FPGA 專注於影像處理。MCU 負責溫度感測、電壓監控以及 WiFi/BLE 連線。</p>
              </div>
            </div>
            <div className="flex gap-3">
              <div className="mt-1"><Settings className="w-5 h-5 text-green-400"/></div>
              <div>
                <h4 className="text-sm font-medium text-slate-200">參數配置 (Config)</h4>
                <p className="text-xs text-slate-400">使用 MCU 透過 I2C/UART 發送 Gamma 表或亮度指令給 FPGA。</p>
              </div>
            </div>
          </div>
        </div>

        <div className="bg-gradient-to-br from-orange-900/30 to-slate-800 rounded-xl p-6 border border-orange-500/30">
          <h3 className="text-lg font-semibold text-orange-200 mb-2 flex items-center gap-2">
            <AlertTriangle className="w-5 h-5" /> 設計風險提示
          </h3>
          <p className="text-sm text-slate-300">
            原理圖 <strong>AS16sch</strong> 使用了 <strong>XC7A35T</strong>。如果你選擇 <strong>Apex 16-bit LED</strong>，PWM 生成邏輯資源可能會超出 35T 的負荷。
          </p>
          <div className="mt-3 bg-orange-950/50 p-2 rounded text-xs text-orange-300 text-center font-mono">
            建議：升級至 XC7A75T 或 XC7A100T
          </div>
        </div>
      </div>
    </div>
  );
};

const LedComparison = ({ mode, setMode, showBackup, setShowBackup }) => {
  return (
    <div className="animate-in slide-in-from-bottom-4 duration-500">
      <div className="flex justify-center mb-8">
        <div className="bg-slate-800 p-1 rounded-lg inline-flex border border-slate-700">
          <button
            onClick={() => setMode('everlight')}
            className={`px-6 py-2 rounded-md text-sm font-medium transition-all ${
              mode === 'everlight' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'
            }`}
          >
            方案 A: Everlight (標準型)
          </button>
          <button
            onClick={() => setMode('apex')}
            className={`px-6 py-2 rounded-md text-sm font-medium transition-all ${
              mode === 'apex' ? 'bg-cyan-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'
            }`}
          >
            方案 B: Apex Opto (專業型)
          </button>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
        {/* Specs Card */}
        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl h-full">
          <div className="flex items-center justify-between mb-6">
            <h3 className="text-xl font-bold text-white">
              {mode === 'everlight' ? 'Everlight B1010' : 'Apex TOS1010RGB'}
            </h3>
            <span className={`px-2 py-1 rounded text-xs font-mono border ${
              mode === 'everlight' ? 'bg-indigo-900/50 border-indigo-500 text-indigo-300' : 'bg-cyan-900/50 border-cyan-500 text-cyan-300'
            }`}>
              {mode === 'everlight' ? 'B1010DWN3SA' : 'TOS1010RGB-B'}
            </span>
          </div>

          <div className="space-y-4">
            <SpecRow label="灰度等級 (Gray Scale)" value={mode === 'everlight' ? '8-bit (256 levels)' : '16-bit (65,536 levels)'} highlight={mode === 'apex'} />
            <SpecRow label="控制協議" value={mode === 'everlight' ? '單線歸零碼 (Single Wire)' : '單線級聯 (Single Line Cascade)'} />
            <SpecRow label="傳輸速率" value="~800 Kbps" />
            <SpecRow 
              label="特殊功能" 
              value={mode === 'everlight' ? '16-level 電流增益 (Current Gain)' : '雙路備份 (Backup Input)'} 
              highlight={true}
            />
          </div>

          <div className="mt-8 p-4 bg-slate-900/80 rounded-lg border border-slate-700">
            <h4 className="text-sm font-semibold text-slate-200 mb-2">Marlon 的工程筆記:</h4>
            <p className="text-xs text-slate-400 leading-relaxed">
              {mode === 'everlight' 
                ? "標準選擇。Current Gain 功能允許透過電流而非 PWM 來調整色溫，節省 FPGA 資源 (8-bit)。適合一般顯示應用。"
                : "高階選擇。16-bit 深度對 HDR 或低亮度表現至關重要（無色階斷層）。Backup Input (BI) 大幅提升可靠性，但 Layout 走線難度增加。"}
            </p>
          </div>
        </div>

        {/* Interactive Demo */}
        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl h-full flex flex-col">
          <h3 className="text-lg font-semibold text-white mb-4 flex justify-between items-center">
            <span>協議模擬 (Protocol Simulation)</span>
            {mode === 'apex' && (
              <button 
                onClick={() => setShowBackup(!showBackup)}
                className={`text-xs px-2 py-1 rounded border transition-colors ${showBackup ? 'bg-green-900/50 border-green-500 text-green-400' : 'bg-slate-700 border-slate-600 text-slate-400'}`}
              >
                {showBackup ? '備份啟用中 (Backup Active)' : '測試斷點 (Enable Backup Test)'}
              </button>
            )}
          </h3>

          <div className="flex-grow bg-slate-900 rounded-lg border border-slate-700 p-8 flex items-center justify-center relative overflow-hidden">
            <div className="flex items-center gap-4">
              
              {/* Controller */}
              <div className="w-16 h-16 bg-slate-700 rounded border border-slate-500 flex items-center justify-center z-10">
                <span className="text-xs text-slate-300 font-mono">FPGA</span>
              </div>

              {/* Data Path */}
              <div className="relative flex items-center gap-2">
                {/* Main Line */}
                <div className="flex flex-col items-center gap-1">
                  <div className={`h-1 w-16 transition-colors ${showBackup && mode === 'apex' ? 'bg-red-900/50' : 'bg-cyan-500'}`} />
                  <span className="text-[10px] text-slate-500 font-mono">DI (Data In)</span>
                </div>

                {/* Backup Line (Apex Only) */}
                {mode === 'apex' && (
                  <div className="absolute top-8 left-0 flex flex-col items-center gap-1 w-full">
                    <div className={`h-1 w-full rounded transition-all ${showBackup ? 'bg-green-500 animate-pulse' : 'bg-slate-800'}`} />
                    <span className="text-[10px] text-slate-600 font-mono">BI (Backup)</span>
                  </div>
                )}

                {/* LED 1 */}
                <LedUnit id="1" active={!showBackup || mode !== 'apex'} mode={mode} />
                
                <div className={`h-1 w-8 ${showBackup && mode === 'apex' ? 'bg-slate-800' : 'bg-cyan-500'}`} />

                {/* LED 2 */}
                <LedUnit id="2" active={true} mode={mode} isBackupTarget={showBackup && mode === 'apex'} />

                <div className="h-1 w-8 bg-cyan-500" />

                {/* LED 3 */}
                <LedUnit id="3" active={true} mode={mode} />

              </div>
            </div>
          </div>
          
          <div className="mt-4 text-center">
            <p className="text-xs text-slate-400">
              {mode === 'everlight' 
                ? "標準級聯: 如果 LED 1 故障，後端 LED 將失去數據。" 
                : showBackup 
                  ? "容錯機制: LED 1 '故障'。數據透過 BI (Backup Input) 線路繞過它傳輸至 LED 2。"
                  : "正常運作: 數據透過 DI (Data Input) 傳輸。"}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

const LedUnit = ({ id, active, mode, isBackupTarget }) => (
  <div className={`w-12 h-12 rounded-sm border-2 flex items-center justify-center transition-all duration-300 relative ${
    active 
      ? 'bg-slate-800 border-slate-600' 
      : 'bg-red-900/20 border-red-500/50'
  }`}>
    {active ? (
      <div className="grid grid-cols-2 gap-0.5">
        <div className={`w-2 h-2 rounded-full ${isBackupTarget ? 'bg-green-400' : 'bg-red-500'} animate-pulse`} />
        <div className={`w-2 h-2 rounded-full ${isBackupTarget ? 'bg-green-400' : 'bg-green-500'} animate-pulse`} style={{animationDelay: '100ms'}} />
        <div className={`w-2 h-2 rounded-full ${isBackupTarget ? 'bg-green-400' : 'bg-blue-500'} animate-pulse`} style={{animationDelay: '200ms'}} />
        <div className="w-2 h-2 bg-slate-700" />
      </div>
    ) : (
      <span className="text-red-500 text-xs font-bold">X</span>
    )}
    <span className="absolute -bottom-5 text-[10px] text-slate-500">LED {id}</span>
  </div>
);

const SpecRow = ({ label, value, highlight }) => (
  <div className="flex justify-between items-center py-2 border-b border-slate-700/50 last:border-0">
    <span className="text-sm text-slate-400">{label}</span>
    <span className={`text-sm font-medium ${highlight ? 'text-cyan-400' : 'text-slate-200'}`}>{value}</span>
  </div>
);

const FpgaAnalysis = () => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 animate-in fade-in">
      <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl">
        <h3 className="text-lg font-semibold text-white mb-6">資源預估 (Resource Estimate: XC7A35T)</h3>
        
        <div className="space-y-6">
          <ResourceBar 
            label="邏輯單元 (Logic Cells LUTs)" 
            val35={85} 
            val100={30} 
            detail="含 16-bit PWM + Gamma + 校正算法" 
          />
          <ResourceBar 
            label="區塊記憶體 (Block RAM)" 
            val35={92} 
            val100={35} 
            detail="用於高刷新率的 Line Buffers" 
          />
          <ResourceBar 
            label="IO Pins" 
            val35={70} 
            val100={40} 
            detail="並行 RGB 數據輸出組" 
          />
        </div>

        <div className="mt-8 p-4 rounded bg-red-900/20 border border-red-500/30 flex gap-3">
          <AlertTriangle className="w-6 h-6 text-red-500 shrink-0" />
          <div>
            <h4 className="text-sm font-bold text-red-400">嚴重警告</h4>
            <p className="text-xs text-red-200 mt-1">
              XC7A35T 在運行 16-bit 高階系統時接近 100% 佔用率。時序收斂 (Timing Closure) 將非常困難。
            </p>
          </div>
        </div>
      </div>

      <div className="space-y-6">
        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl">
          <h3 className="text-lg font-semibold text-white mb-4">為什麼要升級到 XC7A100T?</h3>
          <ul className="space-y-3">
            {[
              "支援複雜算法 (HDR, 色彩空間轉換)。",
              "更容易達成時序收斂 (減少佈線擁塞)。",
              "單卡可驅動更高解析度。",
              "預留空間給 Soft-core CPU (MicroBlaze) 若有需求。"
            ].map((item, i) => (
              <li key={i} className="flex gap-2 items-start text-sm text-slate-300">
                <CheckCircle2 className="w-4 h-4 text-green-500 mt-0.5 shrink-0" />
                {item}
              </li>
            ))}
          </ul>
        </div>

        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl">
           <h3 className="text-lg font-semibold text-white mb-4">記憶體配置</h3>
           <div className="flex items-center gap-4 bg-slate-900 p-4 rounded border border-slate-700">
             <div className="p-3 bg-blue-900/30 rounded">
               <Layers className="w-6 h-6 text-blue-400" />
             </div>
             <div>
               <div className="text-sm font-bold text-slate-200">Micron MT41K256M16</div>
               <div className="text-xs text-slate-400">4Gb DDR3L • x16 width • 1.35V</div>
               <div className="mt-1 text-xs text-cyan-500">Frame Buffering 必備</div>
             </div>
           </div>
        </div>
      </div>
    </div>
  );
};

const ResourceBar = ({ label, val35, val100, detail }) => (
  <div>
    <div className="flex justify-between mb-1">
      <span className="text-sm font-medium text-slate-300">{label}</span>
      <span className="text-xs text-slate-500">{detail}</span>
    </div>
    <div className="relative h-6 bg-slate-900 rounded-full overflow-hidden">
      {/* 35T Bar */}
      <div 
        className={`absolute top-0 left-0 h-full ${val35 > 90 ? 'bg-red-500' : 'bg-amber-500'} opacity-80 transition-all duration-1000`} 
        style={{ width: `${val35}%` }}
      />
      {/* 100T Bar Reference */}
      <div 
        className="absolute top-0 left-0 h-full border-r-2 border-white/30 bg-green-500/30 z-10 transition-all duration-1000" 
        style={{ width: `${val100}%` }}
      />
      <div className="absolute top-0 right-2 h-full flex items-center text-[10px] text-slate-400 z-20">
        35T: {val35}%
      </div>
       <div className="absolute top-0 left-2 h-full flex items-center text-[10px] text-white z-20">
        100T: {val100}%
      </div>
    </div>
  </div>
);

const ActionPlan = () => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in zoom-in-95">
      <ActionCard 
        step="1"
        title="選擇 LED 方案"
        icon={<Lightbulb className="w-5 h-5 text-yellow-400" />}
        content="專業廣播級選 Apex (需 BI 走線)。成本考量選 Everlight。兩者協議完全不相容，需盡早決定。"
      />
      <ActionCard 
        step="2"
        title="驗證電源設計"
        icon={<Zap className="w-5 h-5 text-orange-400" />}
        content="檢查 AnDAPT PMIC 電流額定值。LED 瞬間電流 (全黑->全白) 巨大，確保 5V/3.8V 軌有 >10A 餘裕。"
      />
      <ActionCard 
        step="3"
        title="DDR Layout"
        icon={<MemoryStick className="w-5 h-5 text-blue-400" />}
        content="嚴格遵守 Xilinx UG483。DDR3L 需要阻抗控制 (40/50 ohm) 和等長佈線 (fly-by)。這是最容易失敗的點。"
      />
      <ActionCard 
        step="4"
        title="FPGA Synthesis"
        icon={<Cpu className="w-5 h-5 text-purple-400" />}
        content="先在 Vivado 針對 XC7A35T 跑一次 Synthesis。如果 LUT > 80%，請立刻換成 75T/100T。"
      />
      <ActionCard 
        step="5"
        title="MCU 整合"
        icon={<Microchip className="w-5 h-5 text-green-400" />}
        content="設計 STM32/ESP32 的通訊協議 (SPI/I2C)，用於從 Flash 載入配置數據給 FPGA。"
      />
    </div>
  );
};

const ActionCard = ({ step, title, icon, content }) => (
  <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-cyan-500/50 transition-colors group">
    <div className="flex items-center gap-3 mb-3">
      <div className="w-8 h-8 rounded-full bg-slate-900 flex items-center justify-center text-slate-500 font-bold border border-slate-700 group-hover:border-cyan-500 group-hover:text-cyan-500 transition-colors">
        {step}
      </div>
      <div className="p-2 bg-slate-900 rounded-lg">{icon}</div>
      <h3 className="font-semibold text-slate-200">{title}</h3>
    </div>
    <p className="text-sm text-slate-400 leading-relaxed pl-11">
      {content}
    </p>
  </div>
);

export default Dashboard;
